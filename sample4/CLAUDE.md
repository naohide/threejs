# The Great Wave - 神奈川沖浪裏 3Dシミュレーション

## プロジェクト概要

葛飾北斎の名作「神奈川沖浪裏」をThree.jsでインタラクティブな3Dシミュレーションとして再現するプロジェクト。

## 技術スタック

- **Three.js**: v0.160.0（CDN経由）
- **ES Modules**: Import map使用
- **シェーダー**: カスタムGLSLシェーダー
- **ポストプロセッシング**: EffectComposer、UnrealBloomPass

## ファイル構成

```
sample4/
├── index.html    # メインファイル（全コード含む）
├── CLAUDE.md     # このファイル
└── .claude/      # Claude Code設定
```

## 主要機能

### 海洋シミュレーション
- **Gerstner波**: 4つの波を合成してリアルな波の動きを実現
- **浮世絵シェーダー**: 藍色グラデーションによる北斎風の配色
- **泡エフェクト**: パーティクルシステムによる波しぶき

### シーン要素
- **富士山**: シンプルなコーンジオメトリによる富士山と雪冠
- **グラデーション空**: 暖色系のグラデーション背景
- **ライティング**: アンビエント、ディレクショナル、ヘミスフィアライト

### インタラクション
- **OrbitControls**: ドラッグで視点回転、スクロールでズーム
- **波強度スライダー**: 波の強さをリアルタイム調整
- **FPSカウンター**: パフォーマンス表示

## 配色パレット（Hokusai Style）

```javascript
colors: {
  deepBlue: 0x0d1b2a,   // 深い藍
  midBlue: 0x1b263b,    // 中間藍
  lightBlue: 0x415a77,  // 明るい藍
  highlight: 0x778da9,  // ハイライト
  foam: 0xe0e1dd,       // 泡（オフホワイト）
  sky: 0xc9ada7,        // 空（淡いピンク/黄）
  fuji: 0xf5f5f5        // 富士山
}
```

## 開発ガイドライン

### コーディング規約
- シェーダーコードは文字列リテラルでインライン記述
- 設定値は`CONFIG`オブジェクトに集約
- グローバル変数は最小限に

### パフォーマンス考慮事項
- `oceanSegments: 256` - 波の解像度（調整可能）
- `foamParticleCount: 3000` - パーティクル数
- `devicePixelRatio` は最大2に制限

### 拡張時の注意点
- 新しい波を追加する場合は`CONFIG.waves`配列に追加
- シェーダーユニフォームも対応して追加が必要
- パーティクルは`resetParticle`関数でリセット

## 実行方法

```bash
# ローカルサーバーで起動（ESモジュール使用のため必要）
npx serve .
# または
python -m http.server 8000
```

ブラウザで `http://localhost:8000` を開く

## 今後の拡張案

- [ ] 船のモデル追加
- [ ] 波の音響効果
- [ ] 時間帯による色変化
- [ ] モバイル対応の最適化
- [ ] ファイル分割（シェーダーを別ファイルに）
